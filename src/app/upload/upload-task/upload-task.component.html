<mat-card class="md-app-card mat-elevation-z0 card">
  <mat-card-header>
    <mat-card-title>
      <div class="row" *ngIf="(isUploadCompleted|async)">
        <div class="col-xsm-12 col-sm-12 col-md-12 col-lg-12 col-xl-12">
          <mat-icon class="hint">cloud_done</mat-icon>
        </div>
      </div>
      <div class="row">
        <div class="col-xsm-12 col-sm-12 col-md-10 col-lg-10 col-xl-10">
          <p class="hint-value">{{fileName}}</p>
        </div>
        <!-- START: File Info Menu -->
        <div class="col-xsm-12 col-sm-12 col-md-2 col-lg-2 col-xl-2">
          <button mat-icon-button
                  [matMenuTriggerFor]="fileInfoMenu"
                  class="border-0"
                  aria-label="file info menu trigger">
            <mat-icon class="mat-primary">info_circle</mat-icon>
          </button>
        </div>
      </div>

      <mat-menu #fileInfoMenu="matMenu"
                class="avatar-button">
        <mat-card class="mat-elevation-z0">
          <!-- START: File Info Card -->
          <mat-card-header>
            <div class="row">
              <div class="col-xsm-12 col-sm-12 col-md-2 col-lg-2 col-xl-2">
                <mat-icon class="mat-primary float-md-left float-lg-left float-xl-left">info_circle</mat-icon>
              </div>
              <div class="col-xsm-12 col-sm-12 col-md-10 col-lg-10 col-xl-10">
                <p>File Info</p>
              </div>
            </div>
          </mat-card-header>
          <mat-card-content>
            <mat-divider></mat-divider>
            <app-info-card [title]="['Name']" [msg]="[fileName]"></app-info-card>
            <app-info-card [title]="['Type']" [msg]="[fileType]"></app-info-card>
            <app-info-card [title]="['Size']" [msg]="[fileSize]"></app-info-card>
          </mat-card-content>
          <!-- END: File Info Card -->
        </mat-card>
      </mat-menu>
      <!-- END: File Info Menu -->
    </mat-card-title>
  </mat-card-header>
  <mat-card-content>
    <div class="row">
      <div class="col-xsm-12 col-sm-12 col-md-10 col-lg-10 col-xl-10">
        <span class="hint"><mat-icon class="mat-app-white">info</mat-icon>
          {{isFileUploadStarted}}</span>
      </div>
    </div>
    <mat-progress-bar
      mode="determinate"
      [value]="percentage | async"
      #progress>
    </mat-progress-bar>

    <div *ngIf="!(isUploadCompleted | async)">
      <a mat-icon-button
         (click)="handleFileUpload()"
         [disabled]="(isUploadCompleted | async)">
        <mat-icon>{{play_pause_icon}}</mat-icon>
      </a>
      <button mat-iocn-button
              (click)="task.cancel()"
              [disabled]="(isUploadCompleted | async)">
        <mat-icon>cancel</mat-icon>
      </button>
    </div>
    <div *ngIf="snapshot | async as snap">
      <div *ngIf="(isUploadCompleted | async)">
        <a [href]="downloadURL"
           [disabled]="!downloadURL"
           mat-icon-button
           target="_blank"
           rel="noopener"
           mat-button
           class="white">
          <mat-icon>visibility</mat-icon>
        </a>
      </div>

      <div *ngIf="percentage | async as pct" class="task">
        <div class="task">
          <span class="hint-value">{{ pct |number }} %</span>
          <span class="hint"> Completed</span>
        </div>
        <div class="task">
          <span class="hint-value">{{ (snap.bytesTransferred | fileSize) }}</span>
          <span class="hint"> of </span>
          <span class="hint-value">{{ (snap.totalBytes | fileSize)}}</span>
          <span class="hint"> Transferred</span>
        </div>
      </div>
    </div>
  </mat-card-content>
  <mat-card-actions>
  </mat-card-actions>
</mat-card>
